<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             x:Class="TableManager.App.Views.TableView">

    <Grid Background="White">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <StackPanel Grid.Row="0" 
                   Orientation="Horizontal" 
                   HorizontalAlignment="Right" 
                   Margin="20,20,20,0">
            <Button Content="Головна сторінка"
                    Width="140" 
                    Background="#047857"
                    Foreground="White"
                    FontWeight="SemiBold"
                    Margin="0,0,10,0"
                    Click="Home_Click">
                <Button.Styles>
                    <Style Selector="Button:pointerover /template/ ContentPresenter">
                        <Setter Property="Background" Value="#047857"/>
                    </Style>
                </Button.Styles>
            </Button>
            <Button Content="Довідка"
                    Width="100" 
                    Background="#047857"
                    Foreground="White"
                    FontWeight="SemiBold"
                    Margin="0,0,10,0"
                    Click="Help_Click">
                <Button.Styles>
                    <Style Selector="Button:pointerover /template/ ContentPresenter">
                        <Setter Property="Background" Value="#047857"/>
                    </Style>
                </Button.Styles>
            </Button>
            <Button Content="Зберегти"
                    Width="120" 
                    Background="#047857"
                    Foreground="White"
                    FontWeight="SemiBold"
                    Click="Save_Click">
                <Button.Styles>
                    <Style Selector="Button:pointerover /template/ ContentPresenter">
                        <Setter Property="Background" Value="#047857"/>
                    </Style>
                </Button.Styles>
            </Button>
        </StackPanel>

        <StackPanel Grid.Row="1" 
                   Orientation="Horizontal" 
                   HorizontalAlignment="Center" 
                   Margin="20">
            <TextBlock Text="Рядки:" 
                      Foreground="#1f2937" 
                      VerticalAlignment="Center"
                      Margin="0,0,10,0"/>
            <TextBox x:Name="RowsBox" 
                    Width="60" 
                    Text="5"
                    Margin="0,0,20,0"/>
            <TextBlock Text="Стовпці:" 
                      Foreground="#1f2937" 
                      VerticalAlignment="Center"
                      Margin="0,0,10,0"/>
            <TextBox x:Name="ColsBox" 
                    Width="60" 
                    Text="5"
                    Margin="0,0,20,0"/>
            <Button Content="Створити таблицю"
                    Background="#047857"
                    Foreground="White"
                    FontWeight="SemiBold"
                    Width="180"
                    Click="CreateTable_Click">
                <Button.Styles>
                    <Style Selector="Button:pointerover /template/ ContentPresenter">
                        <Setter Property="Background" Value="#047857"/>
                    </Style>
                </Button.Styles>
            </Button>
            <CheckBox x:Name="ShowFormulas"
                      Content="Показувати формули замість значень"
                      Foreground="#1f2937"
                      Margin="20,0,0,0">
   
                <!-- <CheckBox.Styles>
                    <Style Selector="CheckBox:pointerover /template/ Border#NormalRectangle">
                        <Setter Property="Background" Value="Transparent"/>
                        <Setter Property="BorderBrush" Value="#9ca3af"/>
                    </Style>
                </CheckBox.Styles> -->
            </CheckBox>
        </StackPanel>

        <Border Grid.Row="2" 
                Background="#f9fafb" 
                BorderBrush="#d1d5db"
                BorderThickness="1"
                CornerRadius="10"
                Margin="20"
                Padding="20">
            <ScrollViewer HorizontalScrollBarVisibility="Auto" 
                         VerticalScrollBarVisibility="Auto">
                <StackPanel>

                    <StackPanel Orientation="Horizontal" Margin="0,0,0,0">
                        <Border Width="50" 
                               Height="35"
                               Margin="0,0,10,2"
                               Background="#d1d5db"
                               BorderBrush="#9ca3af"
                               BorderThickness="1"
                               CornerRadius="3"/>
                        
                        <ItemsControl ItemsSource="{Binding ColumnHeaders}">
                            <ItemsControl.ItemsPanel>
                                <ItemsPanelTemplate>
                                    <StackPanel Orientation="Horizontal"/>
                                </ItemsPanelTemplate>
                            </ItemsControl.ItemsPanel>
                            <ItemsControl.ItemTemplate>
                                <DataTemplate>
                                     <Border Width="106" 
                                           Height="35"
                                           Margin="0,0,0,2"
                                           Background="#d1d5db"
                                           BorderBrush="#9ca3af"
                                           BorderThickness="1"
                                           CornerRadius="3"
                                           Padding="5">
                                        <TextBlock Text="{Binding}" 
                                                  Foreground="#1f2937"
                                                  FontWeight="Bold"
                                                  TextAlignment="Center"
                                                  VerticalAlignment="Center"/>
                                    </Border>
                                    <!-- <Border BorderBrush="#d1d5db" 
       BorderThickness="1" 
       Width="106"
       Height="35"
       Margin="0,0,0,2"
       Background="White"
       CornerRadius="3">
    <TextBox Text="{Binding Value, Mode=TwoWay}" 
            Background="Transparent"
            Foreground="#1f2937"
            BorderThickness="0"
            VerticalAlignment="Center"
            Padding="5,0"
            LostFocus="Cell_LostFocus"
            Tag="{Binding}">
        <TextBox.Styles>
            <Style Selector="TextBox:pointerover /template/ Border">
                <Setter Property="Background" Value="#ECFDF5"/>
            </Style>
            <Style Selector="TextBox:focus /template/ Border">
                <Setter Property="Background" Value="#D1FAE5"/>
                <Setter Property="BorderBrush" Value="#047857"/>
                <Setter Property="BorderThickness" Value="2"/>
            </Style>
        </TextBox.Styles>
    </TextBox>
</Border> -->
                                </DataTemplate>
                            </ItemsControl.ItemTemplate>
                        </ItemsControl>
                    </StackPanel>
            
                    <ItemsControl ItemsSource="{Binding TableRows}">
                        <ItemsControl.ItemTemplate>
                            <DataTemplate>
                                <StackPanel Orientation="Horizontal" Margin="0,0,0,0">
                                
                                    <Border Width="50" 
                                           Height="35"
                                           Margin="0,0,10,2"
                                           Background="#d1d5db"
                                           BorderBrush="#9ca3af"
                                           BorderThickness="1"
                                           CornerRadius="3"
                                           Padding="5">
                                        <TextBlock Text="{Binding RowNumber}" 
                                                  Foreground="#1f2937"
                                                  FontWeight="Bold"
                                                  TextAlignment="Center"
                                                  VerticalAlignment="Center"/>
                                    </Border>
                                    
                                    <ItemsControl ItemsSource="{Binding Cells}">
                                        <ItemsControl.ItemsPanel>
                                            <ItemsPanelTemplate>
                                                <StackPanel Orientation="Horizontal"/>
                                            </ItemsPanelTemplate>
                                        </ItemsControl.ItemsPanel>
                                        <ItemsControl.ItemTemplate>
                                            <DataTemplate>
                                                <Border BorderBrush="#d1d5db" 
                                                       BorderThickness="1" 
                                                       Width="106"
                                                       Height="35"
                                                       Margin="0,0,0,2"
                                                       Background="White"
                                                       CornerRadius="3">
                                                    <TextBox Text="{Binding Value, Mode=TwoWay}" 
                                                            Background="Transparent"
                                                            Foreground="#1f2937"
                                                            BorderThickness="0"
                                                            VerticalAlignment="Center"
                                                            Padding="5,0">
                                                        <TextBox.Styles>
                                                            <Style Selector="TextBox:pointerover /template/ Border">
                                                                <Setter Property="Background" Value="#ECFDF5"/>
                                                            </Style>
                                                            <Style Selector="TextBox:focus /template/ Border">
                                                                <Setter Property="Background" Value="#D1FAE5"/>
                                                                <Setter Property="BorderBrush" Value="#047857"/>
                                                                <Setter Property="BorderThickness" Value="2"/>
                                                            </Style>
                                                        </TextBox.Styles>
                                                    </TextBox>
                                                </Border>
                                            </DataTemplate>
                                        </ItemsControl.ItemTemplate>
                                    </ItemsControl>
                                </StackPanel>
                            </DataTemplate>
                        </ItemsControl.ItemTemplate>
                    </ItemsControl>
                </StackPanel>
            </ScrollViewer>
        </Border>

    </Grid>
</UserControl>
